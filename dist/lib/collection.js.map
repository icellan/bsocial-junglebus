{"version":3,"file":"collection.js","names":["Collection","constructor","collectionName","schema","extend","_id","type","String","_before","_after","find","selector","options","db","getDB","_runBeforeHook","result","collection","_runAfterHook","findOne","updateOne","modifier","cleanModifier","_getCleanModifier","_hasHook","doc","catch","e","console","error","upsertedId","_hasAfterHook","updatedDoc","updateMany","runHooks","update","upsert","insert","cleanedDoc","_getCleanDoc","hasOwnProperty","Random","id","insertOne","deleteOne","deleteMany","before","action","callback","push","after","hook","_hasBeforeHook","i","length","call","clean","statusContext","newContext","validate","isValid","Error","validationErrors","cleanDoc"],"sources":["../../src/lib/collection.js"],"sourcesContent":["import { getDB } from './db';\n\n/**\n * Collection class helper for working with mongodb\n * TODO: refactor this into separate package\n */\nexport class Collection {\n  /**\n   * Constructor\n   *\n   * @param collectionName\n   * @param schema\n   */\n  constructor(collectionName, schema = false) {\n    this.collectionName = collectionName;\n    this.schema = schema;\n    if (schema) {\n      // add the default _id field to the schemas\n      this.schema.extend({\n        _id: { type: String },\n      });\n    }\n\n    this._before = {};\n    this._after = {};\n  }\n\n  /**\n   * Find documents and return an iterator\n   *\n   * @param selector\n   * @param options\n   * @returns {Promise<*>}\n   */\n  async find(selector = {}, options = {}) {\n    if (!this.db) this.db = await getDB();\n\n    await this._runBeforeHook('find', selector, options);\n\n    const result = await this.db.collection(this.collectionName)\n      .find(selector, options);\n\n    await this._runAfterHook('find', result);\n\n    return result;\n  }\n\n  /**\n   * Find exactly 1 document in mongodb and return as object\n   *\n   * @param selector\n   * @param options\n   * @returns {Promise<*>}\n   */\n  async findOne(selector = {}, options = {}) {\n    if (!this.db) this.db = await getDB();\n\n    await this._runBeforeHook('findOne', selector, options);\n\n    const result = await this.db.collection(this.collectionName)\n      .findOne(selector);\n\n    await this._runAfterHook('findOne', result);\n\n    return result;\n  }\n\n  /**\n   * Update only 1 document in mongodb\n   *\n   * @param selector\n   * @param modifier\n   * @param options\n   * @returns {Promise<*>}\n   */\n  async updateOne(selector, modifier, options = {}) {\n    if (!this.db) this.db = await getDB();\n\n    const cleanModifier = this._getCleanModifier(modifier);\n\n    if (this._hasHook('updateOne')) {\n      const doc = await this.findOne(selector)\n        .catch((e) => { console.error(e); });\n\n      await this._runBeforeHook('updateOne', doc, modifier, options);\n\n      const result = await this.db.collection(this.collectionName)\n        .updateOne(doc ? { _id: doc._id } : selector, cleanModifier, options);\n\n      /* eslint-disable no-nested-ternary */\n      const _id = (doc ? doc._id : (result.upsertedId ? result.upsertedId._id : null));\n\n      if (this._hasAfterHook('updateOne')) {\n        const updatedDoc = await this.findOne({ _id });\n        await this._runAfterHook('updateOne', updatedDoc, modifier, options);\n      }\n\n      return result;\n    }\n\n    return this.db.collection(this.collectionName)\n      .updateOne(selector, cleanModifier, options);\n  }\n\n  /**\n   * Update many documents in mongodb\n   *\n   * @param selector\n   * @param modifier\n   * @param options\n   * @returns {Promise<*>}\n   */\n  async updateMany(selector, modifier, options = {}) {\n    if (!this.db) this.db = await getDB();\n\n    if (options?.runHooks !== false) {\n      await this._runBeforeHook('updateMany', selector, modifier, options);\n    }\n\n    const cleanModifier = this._getCleanModifier(modifier);\n    const result = await this.db.collection(this.collectionName)\n      .updateMany(selector, cleanModifier, options);\n\n    if (options?.runHooks !== false) {\n      await this._runAfterHook('updateMany', selector, modifier, options);\n    }\n\n    return result;\n  }\n\n  /**\n   * Alias of updateMany\n   *\n   * @param selector\n   * @param modifier\n   * @param options\n   * @returns {Promise<*>}\n   */\n  async update(selector, modifier, options = {}) {\n    await this._runBeforeHook('update', selector, modifier, options);\n\n    const result = await this.updateMany(\n      selector,\n      modifier,\n      {\n        ...options,\n        runHooks: false,\n      },\n    );\n\n    await this._runAfterHook('update', selector, modifier, options);\n\n    return result;\n  }\n\n  /**\n   * Upsert a document\n   *\n   * @param selector\n   * @param modifier\n   * @param options\n   * @returns {Promise<*>}\n   */\n  async upsert(selector, modifier, options = {}) {\n    options.upsert = true;\n\n    await this._runBeforeHook('upsert', selector, modifier, options);\n\n    const result = await this.updateMany(\n      selector,\n      modifier,\n      {\n        ...options,\n        runHooks: false,\n      },\n    );\n\n    await this._runAfterHook('upsert', selector, modifier, options);\n\n    return result;\n  }\n\n  /**\n   * Insert a single document into mongodb\n   *\n   * @param doc\n   * @param options\n   * @returns {Promise<*>}\n   */\n  async insert(doc, options = {}) {\n    if (!this.db) this.db = await getDB();\n\n    await this._runBeforeHook('insert', doc, options);\n\n    const cleanedDoc = this._getCleanDoc(doc);\n\n    if (!cleanedDoc.hasOwnProperty('_id')) {\n      cleanedDoc._id = Random.id();\n    }\n\n    const result = await this.db.collection(this.collectionName)\n      .insertOne(cleanedDoc, options);\n\n    await this._runAfterHook('insert', cleanedDoc, options);\n\n    return result;\n  }\n\n  async deleteOne(selector, options) {\n    if (!this.db) this.db = await getDB();\n\n    await this._runBeforeHook('deleteOne', selector, options);\n\n    const result = await this.db.collection(this.collectionName)\n      .deleteOne(selector, options);\n\n    await this._runAfterHook('deleteOne', selector, options);\n\n    return result;\n  }\n\n  async deleteMany(selector, options) {\n    if (!this.db) this.db = await getDB();\n\n    await this._runBeforeHook('deleteMany', selector, options);\n\n    const result = await this.db.collection(this.collectionName)\n      .deleteMany(selector, options);\n\n    await this._runAfterHook('deleteMany', selector, options);\n\n    return result;\n  }\n\n  /**\n   * define hooks to call before a certain action is performed\n   *\n   * before('find', (selector, options) => {...} )\n   * before('findOne', (selector, options) => {...} )\n   * before('updateOne', (selector, modifier, options) => {...} )\n   * before('updateMany', (selector, modifier, options) => {...} )\n   * before('insert', (doc, options) => {...} )\n   */\n  before(action, callback) {\n    if (!this._before[action]) this._before[action] = [];\n    this._before[action].push(callback);\n  }\n\n  /**\n   * define hooks to call after a certain action is performed\n   *\n   * after('find', (selector, options) => {...} )\n   * after('findOne', (selector, options) => {...} )\n   * after('updateOne', (selector, modifier, options) => {...} )\n   * after('updateMany', (selector, modifier, options) => {...} )\n   * after('insert', (doc, options) => {...} )\n   *\n   */\n  after(action, callback) {\n    if (!this._after[action]) this._after[action] = [];\n    this._after[action].push(callback);\n  }\n\n  async _runBeforeHook(hook, selector, modifier, options) {\n    if (this._hasBeforeHook(hook)) {\n      for (let i = 0; i < this._before[hook].length; i++) {\n        try {\n          const callback = this._before[hook][i];\n          await callback.call(this, selector, modifier, options)\n            .catch((e) => {\n              console.error(e);\n            });\n        } catch (e) {\n          console.error(e);\n        }\n      }\n    }\n  }\n\n  async _runAfterHook(hook, selector, modifier, options) {\n    if (this._hasAfterHook(hook)) {\n      for (let i = 0; i < this._after[hook].length; i++) {\n        try {\n          const callback = this._after[hook][i];\n          await callback.call(this, selector, modifier, options)\n            .catch((e) => {\n              console.error(e);\n            });\n        } catch (e) {\n          console.error(e);\n        }\n      }\n    }\n  }\n\n  _hasHook(hook) {\n    return this._before.hasOwnProperty(hook) || this._after.hasOwnProperty(hook);\n  }\n\n  _hasBeforeHook(hook) {\n    return this._before.hasOwnProperty(hook);\n  }\n\n  _hasAfterHook(hook) {\n    return this._after.hasOwnProperty(hook);\n  }\n\n  _getCleanModifier(modifier) {\n    let cleanModifier = modifier;\n    if (this.schema) {\n      cleanModifier = this.schema.clean(modifier);\n      const statusContext = this.schema.newContext();\n      statusContext.validate(cleanModifier, { modifier: true });\n      if (!statusContext.isValid()) {\n        throw new Error(statusContext.validationErrors());\n      }\n    }\n\n    return cleanModifier;\n  }\n\n  _getCleanDoc(doc) {\n    let cleanDoc = doc;\n\n    if (this.schema) {\n      cleanDoc = this.schema.clean(doc);\n    }\n\n    return cleanDoc;\n  }\n}\n"],"mappings":"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"}